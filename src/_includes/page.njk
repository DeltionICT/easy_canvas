<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% set css %}
      {% include "css/fonts.njk" %}
      {% include "css/prism.css" %}
      {% include "css/style.css" %}
      {% include "css/leerdoelen.njk" %}
      {% if title == "Introductie" %}
        {% include "css/introductie.css" %}
      {% elif title == "Leerdoelen" %}
        {% include "css/leerdoelen.njk" %}
        {% include "css/regular_text.css" %}
      {% else  %}
        {% include "css/regular_text.css" %}
      {% endif %}
      {% include "css/text.css" %}
    {% endset %}
    <style>
      {{ css | safe }}
    </style>
    <title>{{ course_title }}</title>
</head>
<body>
    <header>
      <nav id="top">   
        <a href="#" onclick="toggleNav()"><img src="/_assets/hamburger_white.svg" alt="menu"  eleventy:widths="20"></a>
        <ul>
          <li><a href="/">Home</a></li>
      {% for p in collections[tags] | postsAscending %}
          <li><a href="{{ p.url }}#{{ p.data.title | slugify }}" {% if p.url==page.url %} class="active" {% endif %}>{{ p.data.title }}</a></li>
      {% endfor %}
        </ul>
      </nav>
      <nav id="side">   
        <a href="#" onclick="toggleNav()"><img src="/_assets/hamburger_white.svg" alt="menu"  eleventy:widths="20"></a>
        <ul>
      {% for p in collections[tags] | postsAscending %}
          <li><a href="{{ p.url }}#{{ p.data.title | slugify }}" {% if p.url==page.url %} class="active" {% endif %}>{{ p.data.title }}</a></li>
      {% endfor %}
        </ul>
      </nav>
  </header>
  <div id="page_wrapper">
  {% block layout %}{% endblock %} 
    <div id="panel-in" class="klapper" onclick="showPanel()"><img eleventy:ignore src="/_assets/2pijltjes_f58220.svg" alt="inklappen"></div>
    <div id="panel-out" class="klapper" onclick="hidePanel()"><img eleventy:ignore src="/_assets/2pijltjes_f58220.svg" alt="uitklappen"></div>
  </div>

    <footer>

    </footer>
    <!--  <script src="/_js/hoogte_indicator.js"></script> -->
    <script>
      window.addEventListener('DOMContentLoaded', function() {
        showPanel();
      });
      window.addEventListener('hashchange', function() {
        if (!window.location.hash) return;
        console.log('De URL-hashtag is veranderd!');
        
        // Je kunt nu de nieuwe URL ophalen
        const newHash = window.location.hash;
        console.log('Nieuwe hashtag:', newHash);
        
        // Voer hier je eigen logica uit, bijvoorbeeld een functie aanroepen
        handleHashChange(newHash);
      });

      function handleHashChange(hash) {
        setTimeout(function() {
          const targetElement = document.querySelector(window.location.hash);
          
          if (targetElement) {
            const newScrollPosition = targetElement.offsetTop - 160;
            
            window.scrollTo({
              top: newScrollPosition,
              //behavior: 'smooth'
            });
          }
        }, 0);
      } 

      function hidePanel() {
        console.log("hidePanel");
        const arrow_in = document.getElementById('panel-in');
        const arrow_out = document.getElementById('panel-out');
        const panel = document.getElementById('inhoudsopgave');
        arrow_out.style.display = 'none';
        arrow_in.style.display = 'block';
        panel.style.flex = 0;
        panel.style.padding = 0;
        panel.style.overflow = 'hidden';
        panel.style.minWidth = '0px';
      }

      function showPanel() {
        console.log("showPanel");
        const panel = document.getElementById('inhoudsopgave');
        const arrow_in = document.getElementById('panel-in');
        const arrow_out = document.getElementById('panel-out');
        arrow_out.style.display = 'block';
        arrow_in.style.display = 'none';
        panel.style.flexBasis = 'content';
        panel.style.padding = '1rem';
        panel.style.overflow = 'auto';
        panel.style.minWidth = '250px';
      }



      function toggleNav() {
        const nav = document.querySelector('nav#side ul');
        if (nav.style.display === 'flex')  {
          nav.style.display = 'none';
        } else {
          nav.style.display = 'flex';
        }
      }
    
    </script>
    </body> 
</html>